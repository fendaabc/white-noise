# 实现计划

- [x] 1. 重构 HTML 布局以实现单屏体验

  - 修改主容器结构，优化垂直间距以适应单屏显示
  - 更新声音选择器 HTML 结构以支持水平滚动布局
  - 添加滚动指示器元素和边缘渐变的容器结构
  - _需求: 1.1, 1.2, 1.3, 2.1_

- [x] 2. 实现水平声音选择 CSS

  - [x] 2.1 创建水平滚动容器样式

    - 为`.sound-selector-horizontal`编写 CSS，包含适当的溢出和滚动行为
    - 使用供应商前缀实现滚动条隐藏以保持整洁外观
    - 添加平滑滚动行为和动量滚动支持
    - _需求: 2.1, 2.2, 2.3_

  - [x] 2.2 实现边缘渐变指示器

    - 为左右滚动指示器渐变创建 CSS
    - 将指示器绝对定位在滚动容器边缘上方
    - 实现指示器可见性的淡入/淡出过渡
    - _需求: 2.4, 2.5_

  - [x] 2.3 将声音按钮布局转换为水平 flex
    - 修改`.sound-btn`样式以在水平 flex 容器中工作
    - 更新声音列表容器以使用 flexbox 和适当的间距
    - 确保水平布局中按钮尺寸和对齐的一致性
    - _需求: 2.1, 2.6, 2.7_

- [x] 3. 增强视觉状态管理系统

  - [x] 3.1 实现增强的激活状态样式

    - 创建增强的`.sound-btn.active`样式，包含亮色轮廓和增强背景
    - 为选中状态添加发光边框效果和提升阴影
    - 实现定时器选项选择的`.timer-btn.active`样式
    - _需求: 3.3, 3.4, 3.6_

  - [x] 3.2 添加平滑状态过渡动画
    - 为所有状态变化（悬停、激活、播放）实现 CSS 过渡
    - 使用现有动画系统为播放状态添加呼吸动画
    - 为播放按钮状态变化创建平滑过渡
    - _需求: 3.1, 3.2, 7.2_

- [x] 4. 创建统一控制面板布局

  - [x] 4.1 实现并排控制面板结构

    - 修改`.control-panel` CSS 以使用 flexbox 和适当的间距和对齐
    - 确保音量控制和定时器控制在视觉上分组和对齐
    - 为两个控制部分实现一致的顶部基线对齐
    - _需求: 4.1, 4.2, 4.3_

  - [x] 4.2 添加响应式控制面板行为
    - 为移动设备创建媒体查询以垂直堆叠控件
    - 为平板和桌面布局实现响应式断点
    - 确保所有设备尺寸上的适当间距和触摸目标
    - _需求: 4.4, 5.1, 5.2, 5.3, 5.4_

- [x] 5. 实现水平滚动交互管理器

  - [x] 5.1 创建 HorizontalScrollManager 类

    - 编写 JavaScript 类来管理水平滚动交互
    - 为桌面设备实现鼠标滚轮水平滚动支持
    - 添加滚动位置跟踪和指示器可见性管理
    - _需求: 2.6, 7.1, 7.4_

  - [x] 5.2 实现滚动指示器可见性逻辑

    - 添加 JavaScript 逻辑，根据滚动位置显示/隐藏左右边缘指示器
    - 当指示器出现/消失时实现平滑的不透明度过渡
    - 处理内容完全适合容器内的边缘情况
    - _需求: 2.4, 2.5, 6.1_

  - [x] 5.3 添加移动触摸滚动支持
    - 确保原生水平滑动手势在移动设备上正常工作
    - 测试和优化触摸设备的动量滚动行为
    - 处理与现有交互系统的触摸事件冲突
    - _需求: 2.7, 5.2, 7.1_

- [x] 6. 更新主容器间距以适应单屏显示

  - 修改`.main-container`间距以优化单屏体验
  - 减少主要部分（标题、播放按钮、声音选择器、控件）之间的边距和间隙
  - 确保所有内容在标准视口高度（≥600px）内无需滚动即可显示
  - 在不同屏幕尺寸和方向上测试和调整间距
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 7. 与现有状态管理系统集成

  - [x] 7.1 更新 JavaScript 状态管理以支持增强视觉状态

    - 修改现有声音按钮点击处理程序以支持新的激活状态系统
    - 更新状态持久化以包含激活的声音选择
    - 确保与现有多声音播放系统的兼容性
    - _需求: 3.3, 3.4, 3.5, 3.6_

  - [x] 7.2 添加滚动位置状态管理
    - 实现页面重新加载时的滚动位置保存和恢复
    - 在布局变化和响应式断点期间添加滚动位置管理
    - 确保滚动状态不会干扰现有的音频状态管理
    - _需求: 8.1, 8.2, 8.3_

- [x] 8. 实现可访问性增强

  - [x] 8.1 为水平滚动添加键盘导航

    - 在水平布局中实现声音选择的箭头键导航
    - 为滚动容器和声音按钮添加焦点管理
    - 确保新布局的适当 tab 顺序和焦点指示器
    - _需求: 6.2, 6.3_

  - [x] 8.2 为滚动指示器添加屏幕阅读器支持
    - 为滚动状态公告实现 ARIA 标签和实时区域
    - 为声音选择和激活状态添加适当的标签
    - 确保状态变化正确传达给辅助技术
    - _需求: 6.1, 6.4_

- [x] 9. 添加性能优化

  - [x] 9.1 实现滚动事件节流

    - 添加节流滚动事件处理程序以保持 60fps 性能
    - 优化指示器可见性计算以实现平滑滚动
    - 为平滑滚动动画实现 requestAnimationFrame
    - _需求: 7.1, 7.3, 7.5_

  - [x] 9.2 优化响应式布局过渡
    - 在响应式断点之间添加平滑过渡
    - 实现窗口调整大小时的高效布局重新计算
    - 确保布局变化不会导致视觉跳跃或性能问题
    - _需求: 5.5, 7.2, 7.4_

- [x] 10. 添加入场动画和润色

  - 为水平声音列表项实现交错入场动画
  - 为布局变化和响应式断点添加平滑过渡
  - 创建微妙的悬停和交互反馈动画
  - 确保所有动画尊重用户的减少动画偏好
  - _需求: 7.2, 7.4_

- [x] 11. 全面测试和完善

  - [x] 11.1 跨浏览器和设备测试水平滚动

    - 验证滚动条隐藏在所有主要浏览器中一致工作
    - 在各种移动设备和浏览器上测试触摸滚动行为
    - 在桌面平台上验证鼠标滚轮滚动功能
    - _需求: 2.2, 2.3, 2.6, 2.7_

  - [x] 11.2 验证跨视口尺寸的单屏布局

    - 测试布局在常见屏幕分辨率上适合视口
    - 验证响应式断点在平板和移动设备上正确工作
    - 确保核心功能不需要垂直滚动
    - _需求: 1.1, 1.2, 1.3, 1.4, 5.1, 5.2, 5.3, 5.4, 5.5_

  - [x] 11.3 验证状态管理和视觉反馈
    - 测试声音和定时器选择的增强激活状态
    - 验证平滑过渡和动画性能
    - 确保状态持久化在新布局中正确工作
    - _需求: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 7.1, 7.2_
